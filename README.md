# 油站产品维修管理系统 V2.0

## 项目概述

这是一个现代化的油站产品维修管理系统，基于原有的V1.html进行了全面重构和功能优化。系统采用模块化架构，提供了完整的数据管理、权限控制、导入导出等功能。

## 🚀 主要特性

### ✅ 已实现的优化功能

1. **去除冗余菜单** - 移除了油站管理、产品管理、维修管理等独立菜单
2. **分角色登录** - 支持admin（所有权限）和guest（仅查看权限）两种角色
3. **汇总信息展示** - 所有数据平铺显示，按列分组信息
4. **列排序功能** - 所有列支持升序/降序排序
5. **统一筛选条件** - 将所有筛选条件整合到一个区域
6. **数据增删改** - 支持新增、修改数据，参考查看的展示形式
7. **Excel导入导出** - 完整的Excel文件导入导出功能
8. **自定义列显示** - 按分组控制列的显示/隐藏，默认展示重要列
9. **响应式列宽** - 列宽度自适应屏幕，支持滑动浏览，文本溢出处理

### 📊 列分组信息

#### 油站信息
- 油站ID、油站名称、行政区域（省、市）、油站地址、所属企业、登记时间

#### 产品信息  
- 产品序列号、产品类别码、类别描述、产品线（V|G）、安装供应商、安装日期、安装油站、安装人员、质保到期日

#### 维修情况
- 维修订单号、申请维修时间、报修油站、报修产品序列号、维修服务商、故障类别、故障描述、维修进度、是否换件、坏件收到时间

## 🏗️ 项目结构

```
v2-refactored/
├── index.html              # 主页面
├── css/
│   └── styles.css          # 自定义样式
├── js/
│   ├── config.js           # 系统配置和列定义
│   ├── data.js             # 数据管理模块
│   ├── auth.js             # 身份验证和权限管理
│   ├── table.js            # 表格管理核心模块
│   ├── modal.js            # 模态框管理
│   ├── export.js           # 导入导出功能
│   └── main.js             # 主入口文件
└── README.md               # 项目说明文档
```

## 🔧 技术栈

- **前端框架**: 原生JavaScript (ES6+)
- **UI框架**: Tailwind CSS
- **图标库**: Font Awesome 6.7.2
- **Excel处理**: SheetJS (xlsx)
- **架构模式**: 模块化设计，依赖注入

## 📱 功能模块

### 1. 身份验证模块 (auth.js)
- 用户登录/登出
- 角色权限控制
- 会话管理
- 权限验证装饰器

### 2. 数据管理模块 (data.js)
- 测试数据管理
- 数据筛选和排序
- 数据分页
- 统计信息计算

### 3. 表格管理模块 (table.js)
- 动态表格渲染
- 列排序功能
- 筛选条件处理
- 分页控制
- 列显示设置

### 4. 模态框管理模块 (modal.js)
- 详情查看模态框
- 新增/编辑表单模态框
- 列设置模态框
- 表单验证

### 5. 导入导出模块 (export.js)
- Excel数据导出
- Excel数据导入
- 数据验证
- 格式转换

### 6. 配置管理模块 (config.js)
- 列配置定义
- 权限配置
- 系统参数
- 工具函数

## 🚀 快速开始

### 1. 环境要求
- 现代浏览器 (Chrome 80+, Firefox 75+, Safari 13+, Edge 80+)
- 支持ES6语法
- 支持本地存储

### 2. 启动方式
1. 直接在浏览器中打开 `index.html`
2. 或使用本地服务器 (推荐)：
   ```bash
   # 使用Python
   python -m http.server 8000
   
   # 使用Node.js
   npx serve .
   
   # 使用Live Server (VS Code插件)
   ```

### 3. 登录账户
- **管理员**: admin / 123456 (拥有所有权限)
- **访客**: guest / 123456 (仅查看权限)

## 🎯 使用指南

### 数据查看
1. 登录系统后自动显示汇总信息
2. 使用筛选条件快速查找数据
3. 点击列标题进行排序
4. 点击"查看"按钮查看详细信息

### 数据管理 (管理员权限)
1. 点击"新增"按钮添加新记录
2. 点击"编辑"按钮修改现有记录
3. 点击"删除"按钮删除记录

### 列显示设置
1. 点击"列设置"按钮
2. 勾选/取消勾选要显示的列
3. 点击"保存设置"应用更改

### 数据导入导出
1. **导出**: 点击"导出Excel"按钮下载当前数据
2. **导入**: 点击"导入Excel"选择文件上传

## 🔒 权限说明

### 管理员权限 (admin)
- ✅ 查看数据
- ✅ 新增数据
- ✅ 编辑数据
- ✅ 删除数据
- ✅ 导入数据
- ✅ 导出数据

### 访客权限 (guest)
- ✅ 查看数据
- ❌ 新增数据
- ❌ 编辑数据
- ❌ 删除数据
- ❌ 导入数据
- ✅ 导出数据

## 🎨 界面特性

### 响应式设计
- 支持桌面端和移动端
- 自适应列宽
- 触摸友好的操作界面

### 用户体验优化
- 平滑的动画过渡
- 直观的操作反馈
- 友好的错误提示
- 数据加载状态显示

### 数据展示优化
- 文本溢出显示省略号
- 鼠标悬浮显示完整内容
- 状态标签彩色显示
- 分组信息清晰展示

## 🔧 开发调试

### 调试模式
在URL中添加 `?debug=true` 参数启用调试模式：
```
http://localhost:8000/index.html?debug=true
```

### 调试接口
开发模式下可使用以下调试命令：
```javascript
// 获取系统状态
window.debug.getStatus()

// 重启应用
window.debug.restart()

// 导出错误日志
window.debug.exportLogs()

// 访问各个模块
window.debug.modules.auth()
window.debug.modules.table()
```

## 📝 更新日志

### V2.0.0 (2024-10-29)
- ✨ 全面重构原V1.html系统
- ✨ 实现模块化架构设计
- ✨ 新增角色权限控制
- ✨ 优化数据表格显示
- ✨ 集成筛选和排序功能
- ✨ 完善导入导出功能
- ✨ 添加自定义列显示
- ✨ 优化响应式布局
- ✨ 增强用户体验

## 🤝 贡献指南

1. Fork 项目
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 🆘 支持

如果您遇到问题或有任何建议，请：
1. 查看本文档的常见问题
2. 检查浏览器控制台的错误信息
3. 提交 Issue 描述问题

---

**开发团队**: JoyCode Agent  
**版本**: V2.0.0  
**最后更新**: 2024-10-29